(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},125:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(9),r=a.n(c),s=(a(101),a(103),a(93)),l=(a(106),a(47)),i=(a(107),a(90)),m=(a(66),a(27)),d=(a(198),a(46)),u=(a(116),a(11)),h=a(82),f=a(83),E=a(91),p=a(84),g=a(92),R=(a(119),a(64)),C=(a(122),a(28)),y=(a(125),C.a.Header),b=C.a.Content,P=C.a.Footer,_=C.a.Sider,v=R.a.TextArea;function w(e){var t=["#332626","#cc8533","#a68500","#245900","#4d998a","#002966","#140033","#331a2e","#cc0036","#993626","#33210d","#becc00","#2ca600","#103d40","#265499","#8f66cc","#59003c","#401016","#734939","#b39e86","#a1b359","#1d331a","#33adcc","#8f9cbf","#4f4359","#cc3399","#b25965","#bf4d00","#734d00","#657356","#66cc8f","#23698c","#3600cc","#550080","#a67c8d"];return t[function(e){var t,a,n=0;if(!e||0===e.length)return n;for(t=0,a=e.length;t<a;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return Math.abs(n)}(e)%t.length]}var O=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={user:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_USERNAME,message:"",selectedRoom:"General",rooms:["General"],posts:[]},a.handleUserChanged=function(e){a.setState({user:e.target.value})},a.handleInputChanged=function(e){a.setState({message:e.target.value})},a.handlePostClicked=function(e){fetch("http://127.0.0.1:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_PORT,"/rooms/").concat(a.state.selectedRoom),{method:"POST",mode:"cors",body:JSON.stringify({User:a.state.user,Message:a.state.message})}).catch(function(e){console.error(e)})},a.selectedRoomChanged=function(){var e=a.state.selectedRoom;fetch("http://127.0.0.1:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_PORT,"/rooms/").concat(encodeURIComponent(e))).then(function(e){return e.json()}).then(function(e){a.setState({posts:e})})},a.handleMenuClicked=function(e){if("new-room-button"!==e.key)a.setState({selectedRoom:e.key,posts:[]},function(){a.selectedRoomChanged()});else{var t=prompt("Name of new room?");a.setState({rooms:Array.from(new Set(a.state.rooms.concat(t))),selectedRoom:t},function(){a.selectedRoomChanged()})}},a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.selectedRoomChanged(),fetch("http://127.0.0.1:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_PORT,"/rooms")).then(function(e){return e.json()}).then(function(t){e.setState({rooms:Array.from(new Set(e.state.rooms.concat(t)))})});var t=new WebSocket("ws://127.0.0.1:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_PORT,"/ws"));t.addEventListener("open",function(e){console.log("WS Open")}),t.addEventListener("message",function(t){console.log("Message from server ",t.data);var a=JSON.parse(t.data);e.setState({rooms:Array.from(new Set(e.state.rooms.concat(a.RoomName)))}),a&&a.RoomName===e.state.selectedRoom&&e.setState(function(t){return e.state.selectedRoom!==a.RoomName?t:{posts:t.posts.concat(a.Post)}})})}},{key:"render",value:function(){return o.a.createElement(C.a,null,o.a.createElement(_,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},o.a.createElement("div",{className:"logo"}),o.a.createElement(d.a,{theme:"dark",mode:"inline",selectedKeys:[this.state.selectedRoom],onClick:this.handleMenuClicked},this.state.rooms.map(function(e,t){return o.a.createElement(d.a.Item,{key:e},o.a.createElement(u.a,{type:"team"}),o.a.createElement("span",{className:"nav-text"},e))}),o.a.createElement(d.a.Item,{key:"new-room-button"},o.a.createElement(m.a,{type:"primary",ghost:!0},"New Chat Room")))),o.a.createElement(C.a,{style:{marginLeft:200}},o.a.createElement(y,{style:{fontSize:"20px",background:"#fff",padding:"0 0 0 20px"}},this.state.selectedRoom),this.state.posts.map(function(e,t){return o.a.createElement(b,{key:t,style:{margin:"15px 16px 0",overflow:"initial"}},o.a.createElement("div",{style:{padding:5,background:"#fff",minHeight:"35px"}},o.a.createElement(i.a,{style:{backgroundColor:w(e.User)},icon:"user"}),o.a.createElement("strong",{style:{color:w(e.User),fontSize:20,fontWeight:900,paddingLeft:10}},e.User),o.a.createElement("small",{style:{float:"right"}},e.PostedAt),o.a.createElement("br",null),e.Message))}),o.a.createElement(P,null,o.a.createElement(s.a,null,o.a.createElement(l.a,{span:12},o.a.createElement(v,{placeholder:"Enter a new message here...",rows:2,onChange:this.handleInputChanged})),o.a.createElement(l.a,{span:1}),o.a.createElement(l.a,{span:4},o.a.createElement(m.a,{type:"primary",onClick:this.handlePostClicked},"Post!")))),o.a.createElement(P,null,"Your username:",o.a.createElement(R.a,{defaultValue:this.state.user,onChange:this.handleUserChanged}),o.a.createElement("br",null),"Connected to: http://127.0.0.1:",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER_PORT)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){e.exports=a(197)}},[[96,2,1]]]);
//# sourceMappingURL=main.1860b35c.chunk.js.map